32.2 Notes on filtergraph escaping

Some filter arguments require the use of special characters, typically : to separate key=value pairs in a named options list. In this case the user should perform a first level escaping when specifying the filter arguments. For example, consider the following literal string to be embedded in the drawtext filter arguments:

   
this is a 'string': may contain one, or more, special characters
Since : is special for the filter arguments syntax, it needs to be escaped, so you get:

 	
text=this is a \'string\'\: may contain one, or more, special characters
A second level of escaping is required when embedding the filter arguments in a filtergraph description, in order to escape all the filtergraph special characters. Thus the example above becomes:

 	
drawtext=text=this is a \\\'string\\\'\\: may contain one\, or more\, special characters
Finally an additional level of escaping may be needed when writing the filtergraph description in a shell command, which depends on the escaping rules of the adopted shell. For example, assuming that \ is special and needs to be escaped with another \, the previous string will finally result in:

 	
-vf "drawtext=text=this is a \\\\\\'string\\\\\\'\\\\: may contain one\\, or more\\, special characters"
Sometimes, it might be more convenient to employ quoting in place of escaping. For example the string:

 	
Caesar: tu quoque, Brute, fili mi
Can be quoted in the filter arguments as:

 	
text='Caesar: tu quoque, Brute, fili mi'
And finally inserted in a filtergraph like:

 	
drawtext=text=\'Caesar: tu quoque\, Brute\, fili mi\'
See the “Quoting and escaping” section in the ffmpeg-utils manual for more information about the escaping and quoting rules adopted by FFmpeg.
